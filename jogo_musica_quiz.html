<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qual Ã© a MÃºsica?</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .quiz-container {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            margin: 2rem auto;
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
        }

        .quote-box {
            font-size: 1.4rem;
            font-style: italic;
            margin-bottom: 2rem;
            color: #fff;
            text-shadow: 1px 1px 2px black;
        }

        .input-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        input[type="text"] {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #fff;
            width: 80%;
            font-size: 1.1rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
        }

        .game-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .btn-game {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
            color: white;
        }

        .btn-game:hover { transform: scale(1.05); }
        .btn-check { background-color: #28a745; }
        .btn-hint { background-color: #ffc107; color: #333; }

        .hint-text {
            margin-top: 15px;
            color: #ffc107;
            font-weight: bold;
            display: none;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2rem;
            min-height: 1.5em;
        }

        .score-indicator {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
            color: #fff;
            text-shadow: 1px 1px 2px black;
        }
    </style>
</head>
<body>

<button id="theme-toggle" class="theme-toggle-button"><i class="fas fa-lightbulb"></i></button>

<h2 style="text-align: center; margin-top: 20px; color: var(--primary-color);">Qual Ã© a MÃºsica?</h2>

<div class="quiz-container">
    <div id="score-indicator" class="score-indicator">Pontos: 0 / 20</div>
    <div id="level-indicator">MÃºsica 1 de 20</div>
    <div id="timer-display" class="score-indicator" style="color: #ffc107;">Tempo: 30s</div>
    <div class="quote-box">"Trecho da mÃºsica aparecerÃ¡ aqui"</div>
    
    <div class="input-area">
        <input type="text" id="music-input" placeholder="Qual Ã© o nome da mÃºsica?">
        
        <div class="game-controls">
            <button class="btn-game btn-hint" onclick="showHint()"><i class="fas fa-lightbulb"></i> Dica</button>
            <button class="btn-game btn-check" onclick="checkAnswer()"><i class="fas fa-check"></i> Responder</button>
        </div>
    </div>

    <div id="hint-display" class="hint-text"></div>
    <div id="feedback-display" class="feedback"></div>
</div>

<div class="botoes-container">
    <button class="botao-navegacao" onclick="location.href='pagina3.html'">Voltar aos Jogos</button>
</div>

<script>
    const songs = [
        // Billie Eilish
        { lyric: "Iâ€™m not your friend, or anything, damn / You think that youâ€™re the manâ€¦", hint: "MÃºsica famosa por humilhar um ex que se achava o â€œcara perfeitoâ€ e virou meme no TikTok.", title: "Therefore I Am" },
        { lyric: "What was I made for? / Taking a drive, I was an idealâ€¦", hint: "Trilha do filme Barbie, fala sobre nÃ£o saber qual Ã© o seu propÃ³sito no mundo.", title: "What Was I Made For?" },
        { lyric: "Isnâ€™t it lovely, all alone? / Heart made of glass, my mind of stoneâ€¦", hint: "Dueto triste sobre solidÃ£o e depressÃ£o, uma das mais conhecidas dela.", title: "Lovely" },
        { lyric: "Iâ€™ve been watching you for some time / Canâ€™t stop staring at those ocean eyesâ€¦", hint: "Primeiro grande hit da Billie, romÃ¢ntica e calma, falando dos olhos de alguÃ©m.", title: "Ocean Eyes" },
        { lyric: "I want you to love me like Iâ€™m a hot rideâ€¦", hint: "MÃºsica sobre ciÃºmes, carÃªncia e querer ser prioridade.", title: "Watch" },

        // JÃ£o
        { lyric: "Eu fui idiota por te amar desse jeitoâ€¦", hint: "Hit mais famoso dele, sobre amar alguÃ©m que nÃ£o retribui.", title: "Idiota" },
        { lyric: "Eu sou o vilÃ£o dessa histÃ³riaâ€¦", hint: "Ele se coloca como o erro da prÃ³pria histÃ³ria, cheio de ego e culpa.", title: "Vou Morrer Sozinho" },
        { lyric: "A gente nÃ£o dÃ¡ certo juntoâ€¦", hint: "Relacionamento que nÃ£o funciona, mas terminar dÃ³i mais ainda.", title: "Essa Eu Fiz Pro Nosso Amor" },
        { lyric: "E quando acontece, aconteceâ€¦", hint: "Fala sobre sentimentos que surgem sem pedir permissÃ£o.", title: "Acontece" },
        { lyric: "Me lambe, me mordeâ€¦", hint: "MÃºsica intensa, sensual e caÃ³tica.", title: "Me Lambe" },

        // Sabrina Carpenter
        { lyric: "Iâ€™m working late, â€™cause Iâ€™m a singerâ€¦", hint: "Pop chiclete de 2024, cheia de confianÃ§a e deboche.", title: "Espresso" },
        { lyric: "Please, please, please donâ€™t prove Iâ€™m rightâ€¦", hint: "Ela implora para o cara nÃ£o provar que ela estava certa sobre ele ser ruim.", title: "Please Please Please" },
        { lyric: "I feel so much lighter like a featherâ€¦", hint: "MÃºsica sobre se sentir leve depois de superar alguÃ©m.", title: "Feather" },
        { lyric: "Stupid, slow, uselessâ€¦ manchild", hint: "Ela chama o ex de imaturo a mÃºsica inteira, com ironia.", title: "Lonesome" },
        { lyric: "Now Iâ€™m a homewrecker, Iâ€™m a slutâ€¦", hint: "Resposta sarcÃ¡stica Ã s crÃ­ticas e julgamentos da internet.", title: "Because I Liked A Boy" },

        // JVKE
        { lyric: "Oh, to be loved / To feel that way againâ€¦", hint: "MÃºsica lenta e emocional sobre o desejo simples de ser amado de verdade.", title: "Oh To Be Loved" },
        { lyric: "Youâ€™re so pretty, it hurtsâ€¦", hint: "Ele admira alguÃ©m, mas isso acaba machucando ele.", title: "Pretty" },
        { lyric: "Itâ€™s golden hour somewhereâ€¦", hint: "Maior hit do JVKE, sobre um momento perfeito que vocÃª queria congelar.", title: "Golden Hour" },
        { lyric: "I see her in everything I doâ€¦", hint: "MÃºsica sobre nÃ£o conseguir esquecer alguÃ©m e ver essa pessoa em tudo.", title: "Her" },
        { lyric: "She said she thinks sheâ€™s brokenâ€¦", hint: "Inspirada em Coraline, fala de se sentir quebrado por dentro e perdido mentalmente.", title: "this is what sadness feels like" }
    ];

    // Embaralhar a ordem das mÃºsicas
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
    shuffleArray(songs);

    let currentLevel = 0;
    let score = 0;
    let timerInterval;
    const quoteEl = document.querySelector('.quote-box');
    const hintEl = document.getElementById('hint-display');
    const feedbackEl = document.getElementById('feedback-display');
    const inputEl = document.getElementById('music-input');
    const levelEl = document.getElementById('level-indicator');
    const scoreEl = document.getElementById('score-indicator');
    const timerEl = document.getElementById('timer-display');

    function loadLevel() {
        if (currentLevel >= songs.length) {
            quoteEl.textContent = "ParabÃ©ns! VocÃª completou todas!";
            inputEl.style.display = 'none';
            document.querySelector('.game-controls').style.display = 'none';
            hintEl.style.display = 'none';
            feedbackEl.textContent = "ðŸŽ‰";
            timerEl.style.display = 'none';
            return;
        }
        
        clearInterval(timerInterval);
        let timeLeft = 30;
        timerEl.textContent = `Tempo: ${timeLeft}s`;
        
        timerInterval = setInterval(() => {
            timeLeft--;
            timerEl.textContent = `Tempo: ${timeLeft}s`;
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                feedbackEl.style.color = '#f44336';
                feedbackEl.textContent = "Tempo esgotado!";
                inputEl.disabled = true;
                setTimeout(() => {
                    currentLevel++;
                    loadLevel();
                    inputEl.disabled = false;
                }, 1500);
            }
        }, 1000);

        const song = songs[currentLevel];
        quoteEl.textContent = `"${song.lyric}"`;
        hintEl.textContent = `Dica: ${song.hint}`;
        hintEl.style.display = 'none';
        feedbackEl.textContent = "";
        inputEl.value = "";
        levelEl.textContent = `MÃºsica ${currentLevel + 1} de ${songs.length}`;
    }

    function showHint() {
        hintEl.style.display = 'block';
    }

    function winGame() {
        quoteEl.textContent = "VocÃª ganhou o prÃªmio Musical!";
        feedbackEl.innerHTML = `
            <p style="color: gold; margin-bottom: 20px;">VocÃª atingiu ${score} pontos! ðŸŽµ</p>
            <button class="botao-navegacao" onclick="location.href='premio_musica.html'">Pegar PrÃªmio</button>
        `;
        inputEl.style.display = 'none';
        document.querySelector('.game-controls').style.display = 'none';
        hintEl.style.display = 'none';
        levelEl.style.display = 'none';
        timerEl.style.display = 'none';
        clearInterval(timerInterval);
    }

    function normalizeString(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function checkAnswer() {
        const userAnswer = normalizeString(inputEl.value.trim());
        const correctAnswer = normalizeString(songs[currentLevel].title);

        if ((userAnswer.length >= 3 && correctAnswer.includes(userAnswer)) || userAnswer === correctAnswer) {
            clearInterval(timerInterval);
            score++;
            scoreEl.textContent = `Pontos: ${score} / ${songs.length}`;

            if (score >= 10) {
                winGame();
            } else {
                feedbackEl.style.color = '#4caf50';
                feedbackEl.textContent = "Correto! PrÃ³xima mÃºsica...";
                inputEl.disabled = true;
                setTimeout(() => {
                    currentLevel++;
                    loadLevel();
                    inputEl.disabled = false;
                }, 1500);
            }
        } else {
            feedbackEl.style.color = '#f44336';
            feedbackEl.textContent = "Errado, tente novamente!";
        }
    }

    inputEl.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            checkAnswer();
        }
    });

    loadLevel();
</script>
<script src="neve.js"></script>
<script src="theme.js"></script>
</body>
</html>